

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Designing the Package Specification &mdash; CMaize 1.0.0 documentation</title>
      <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css?v=fa44fd50" />
      <link rel="stylesheet" type="text/css" href="../../../_static/css/theme.css?v=e59714d7" />

  
      <script src="../../../_static/jquery.js?v=5d32c60e"></script>
      <script src="../../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../../../_static/documentation_options.js?v=8d563738"></script>
      <script src="../../../_static/doctools.js?v=9a2dae69"></script>
      <script src="../../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="Designing CMaize’s PackageManager Component" href="package_manager.html" />
    <link rel="prev" title="Designing CMaize’s CMaizeProject Component" href="cmaize_project.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../../index.html">
            
              <img src="../../../_static/logo.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../overview.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../background/index.html">CMaize Background</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../getting_started/index.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../api/index.html">API</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../index.html">Developing CMaize</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="../index.html">CMaize Design Documentation</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../overview.html">Overview of CMaize’s Design</a></li>
<li class="toctree-l3"><a class="reference internal" href="../faq.html">Frequently Asked Design Questions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../user_api/index.html">Design of CMaize’s User API</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="index.html">CMaize Class Design</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="cmaize_project.html">Designing CMaize’s CMaizeProject Component</a></li>
<li class="toctree-l4 current"><a class="current reference internal" href="#">Designing the Package Specification</a></li>
<li class="toctree-l4"><a class="reference internal" href="package_manager.html">Designing CMaize’s PackageManager Component</a></li>
<li class="toctree-l4"><a class="reference internal" href="target.html">Designing CMaize’s Target Component</a></li>
<li class="toctree-l4"><a class="reference internal" href="cxx_target.html">Designing CMaize’s C++ Target Classes</a></li>
<li class="toctree-l4"><a class="reference internal" href="python_target.html">Designing CMaize’s Python Target Classes</a></li>
<li class="toctree-l4"><a class="reference internal" href="cmake_target.html">Designing CMaize’s CMake Target Classes</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../assumptions.html">CMaize Assumptions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../conventions.html">CMaize Conventions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmaize_initialization.html">CMaize Initialization</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../new_package_manager.html">How to Create a New PackageManager</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../design_notes/index.html">Design Notes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../faqs.html">Developer FAQs</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../declaring_targets/index.html">Declaring Build Targets</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../dependencies/index.html">Declaring Dependencies</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../bibliography/bibliography.html">References</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">CMaize</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../../index.html">Developing CMaize</a></li>
          <li class="breadcrumb-item"><a href="../index.html">CMaize Design Documentation</a></li>
          <li class="breadcrumb-item"><a href="index.html">CMaize Class Design</a></li>
      <li class="breadcrumb-item active">Designing the Package Specification</li>
      <li class="wy-breadcrumbs-aside">
              <a href="https://github.com/CMakePP/CMaize/edit/master/docs/source/developer/design/classes/package_specification.rst" class="fa fa-github"> Edit on GitHub</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="designing-the-package-specification">
<span id="designing-package-specification"></span><h1>Designing the Package Specification<a class="headerlink" href="#designing-the-package-specification" title="Link to this heading"></a></h1>
<p>Design discussions pertaining to the <code class="docutils literal notranslate"><span class="pre">CMaizeProject</span></code> component (see
<a class="reference internal" href="cmaize_project.html#designing-cmaizes-cmaizeproject-component"><span class="std std-ref">Designing CMaize’s CMaizeProject Component</span></a>) motivated the need for being
able to represent a package’s specification. This page captures the design
process of the CMaize’s <code class="docutils literal notranslate"><span class="pre">PackageSpecification</span></code> class.</p>
<section id="what-is-a-package-specification">
<h2>What is a Package Specification?<a class="headerlink" href="#what-is-a-package-specification" title="Link to this heading"></a></h2>
<p>When a <a class="reference internal" href="../../../background/terminology.html#term-project"><span class="xref std std-term">project</span></a> is installed, the result is a <a class="reference internal" href="../../../background/terminology.html#term-package"><span class="xref std std-term">package</span></a>. Generally
speaking the same project can result in multiple packages. This is because
projects evolve with time (e.g., new versions are released) and because most
projects can be built in a number of different ways (i.e., with different
versions of dependencies, with or without an optional feature, etc.). Package
specifications are meant to uniquely identify a package.</p>
</section>
<section id="why-do-we-need-package-specification">
<h2>Why Do We Need Package Specification?<a class="headerlink" href="#why-do-we-need-package-specification" title="Link to this heading"></a></h2>
<p>At the end of the day, the packaged dependencies used to build a project can
determine whether a build succeeds, the overall performance, and even the
correctness. It is therefore critical that CMaize be able to capture sufficient
package information so as to distinguish among different packages. The
<code class="docutils literal notranslate"><span class="pre">PackageSpecification</span></code> class is charged with being able to represent the
contents of a package.</p>
</section>
<section id="package-specification-considerations">
<h2>Package Specification Considerations<a class="headerlink" href="#package-specification-considerations" title="Link to this heading"></a></h2>
<dl class="simple" id="ps-package-discernment">
<dt>package discernment</dt><dd><p>The primary purpose of the package specification is to contain enough
information so that CMaize can discern among existing packages (particularly
from the same project). This requires knowing:</p>
<ul class="simple">
<li><p>Package’s name</p></li>
<li><p>Version</p></li>
<li><p>Configuration options (for packages built with CMake these are the CMake
arguments used to configure the package).</p></li>
<li><p>Compilation arguments</p></li>
</ul>
</dd>
</dl>
<dl class="simple" id="ps-source-location">
<dt>source location</dt><dd><p>For packages CMaize is expected to obtain and/or build, we need to know where
to find the package’s source code. For most dependencies this will be a URL,
but for some projects (notably the one being built) the source files may
reside locally on disk.</p>
<ul class="simple">
<li><p>It is expected that there will be packages that users will not want CMaize
to obtain/build. For such packages, the source location can simply be left
blank.</p></li>
</ul>
</dd>
</dl>
<section id="out-of-scope">
<h3>Out of Scope<a class="headerlink" href="#out-of-scope" title="Link to this heading"></a></h3>
<dl class="simple">
<dt>deciding if a package matches a specification</dt><dd><p><code class="docutils literal notranslate"><span class="pre">PackageSpecification</span></code> objects are inputs to package managers. It is the
package manager’s job to determine if a package matches a provided
specification. See <cite>designing_cmaizes_packagemanager_component</cite> for more
details.</p>
</dd>
</dl>
</section>
</section>
<section id="package-specification-design">
<h2>Package Specification Design<a class="headerlink" href="#package-specification-design" title="Link to this heading"></a></h2>
<figure class="align-center" id="id1">
<span id="fig-package-specification"></span><img alt="../../../_images/package_specification.png" src="../../../_images/package_specification.png" />
<figcaption>
<p><span class="caption-number">Fig. 6 </span><span class="caption-text">Schematic illustration of the state of the <code class="docutils literal notranslate"><span class="pre">PackageSpecification</span></code> class.</span><a class="headerlink" href="#id1" title="Link to this image"></a></p>
</figcaption>
</figure>
<p><a class="reference internal" href="#fig-package-specification"><span class="std std-numref">Fig. 6</span></a> shows the <code class="docutils literal notranslate"><span class="pre">PackageSpecification</span></code> class’s
state. The class itself is purely a data structure, meant to package all of the
information together. While the source location attribute is not applicable to
packages which have already been built, at present, we have opted to include it
on all <code class="docutils literal notranslate"><span class="pre">PackageSpecification</span></code> objects. This is simply to avoid introducing a
derived class to store one attribute. If management of the source location
becomes more complicated it may make sense to factor it out out into a derived
class.</p>
</section>
<section id="summary">
<h2>Summary<a class="headerlink" href="#summary" title="Link to this heading"></a></h2>
<dl class="simple">
<dt><a class="reference internal" href="#ps-package-discernment"><span class="std std-ref">package discernment</span></a></dt><dd><p>The <code class="docutils literal notranslate"><span class="pre">PackageSpecification</span></code> class contains state capable of recording how
the package was configured.</p>
</dd>
<dt><a class="reference internal" href="#ps-source-location"><span class="std std-ref">source location</span></a></dt><dd><p>The <code class="docutils literal notranslate"><span class="pre">PackageSpecification</span></code> class stores the source location for packages
CMaize is obtaining/building.</p>
</dd>
</dl>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="cmaize_project.html" class="btn btn-neutral float-left" title="Designing CMaize’s CMaizeProject Component" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="package_manager.html" class="btn btn-neutral float-right" title="Designing CMaize’s PackageManager Component" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2020, CMakePP Team.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>